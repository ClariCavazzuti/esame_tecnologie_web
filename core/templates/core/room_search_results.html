<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Risultati della Ricerca Camere</title>
</head>
<body>
    <h1>Risultati della Ricerca Camere</h1>

    {% if messages %}
        {% for message in messages %}
            <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <form method="POST" action="{% url 'confirm_booking' %}">
        {% csrf_token %}
        <!-- Convertiamo le date nel formato YYYY-MM-DD -->
        <input type="hidden" name="check_in_date" value="{{ check_in_date|date:'Y-m-d' }}">
        <input type="hidden" name="check_out_date" value="{{ check_out_date|date:'Y-m-d' }}">

        {% if available_rooms %}
            <ul>
                {% for camera in available_rooms %}
                    <li>
                        <input type="checkbox" name="camere" value="{{ camera.id }}">
                        {{ camera.nome }} - {{ camera.numero_posti_letto }} posti letto - {{ camera.prezzo_per_notte }}â‚¬/notte
                    </li>
                {% endfor %}
            </ul>

            <label for="numero_telefono">Numero di Telefono:</label>
            <input type="text" name="numero_telefono" id="numero_telefono" required>

            <label for="note">Note:</label>
            <textarea name="note" id="note"></textarea>

            <button type="submit">Conferma Prenotazione</button>
        {% else %}
            <p>Nessuna camera disponibile per le date e il numero di posti letto selezionati.</p>
        {% endif %}
    </form>

    <p><a href="{% url 'search_rooms' %}">Nuova ricerca</a></p>
</body>
</html>
